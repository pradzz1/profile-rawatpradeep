import e,{memo as t,useState as n,useRef as r,Children as i,useCallback as o,useEffect as c}from"react";function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],c=!0,d=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){d=!0,i=e}finally{try{c||null==n.return||n.return()}finally{if(d)throw i}}return o}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=["responsiveProps"],b=["minWidth","maxWidth"],y=["style","onClickCapture"],w=["style"],x=["style","onTouchStart","onMouseDown","onTransitionEnd"],g=["children","show"],S=["children","show"],E=["className","style"],I=["className","style"],T=["className","onClick","style"],O=["props"];function C(t){var d=t.responsiveProps,a=void 0===d?[]:d,v=s(t,p),h=f(n(0),2),C=h[0],L=h[1],k=f(n(v.activeSlideIndex),2),M=k[0],P=k[1],j=r(null),W=r(null),A=r(null),X=r(0),N=r(!1),F=r(""),V=r(null),D=r(null),z=r(0),B=r(M),q=a.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minWidth,r=void 0===n?0:n,i=t.maxWidth,o=void 0===i?null:i,c=s(t,b);return C>r&&(!o||C<=o)?l(l({},e),c):e}),v),H=i.toArray(q.children),R=C?l(l({},q),{},{activeSlideIndex:Math.max(0,Math.min(q.activeSlideIndex,H.length-1)),itemsToShow:Math.min(H.length,q.itemsToShow||0),itemsToScroll:Math.min(H.length,q.itemsToScroll||1)}):v,U=R.containerProps,$=(U=void 0===U?{}:U).style,G=void 0===$?{}:$,J=U.onClickCapture,K=void 0===J?null:J,Q=s(U,y),Y=R.innerProps,Z=(Y=void 0===Y?{}:Y).style,_=void 0===Z?{}:Z,ee=s(Y,w),te=R.itemsListProps,ne=(te=void 0===te?{}:te).style,re=void 0===ne?{}:ne,ie=te.onTouchStart,oe=void 0===ie?null:ie,ce=te.onMouseDown,de=void 0===ce?null:ce,le=te.onTransitionEnd,ae=void 0===le?null:le,ue=s(te,x),se=R.backwardBtnProps,fe=(se=void 0===se?{}:se).children,me=void 0===fe?null:fe,ve=se.show,he=void 0===ve||ve,pe=s(se,g),be=R.forwardBtnProps,ye=(be=void 0===be?{}:be).children,we=void 0===ye?null:ye,xe=be.show,ge=void 0===xe||xe,Se=s(be,S),Ee=R.activeSlideProps,Ie=(Ee=void 0===Ee?{}:Ee).className,Te=void 0===Ie?"":Ie,Oe=Ee.style,Ce=void 0===Oe?{}:Oe,Le=s(Ee,E),ke=R.visibleSlideProps,Me=(ke=void 0===ke?{}:ke).className,Pe=void 0===Me?"":Me,je=ke.style,We=void 0===je?{}:je,Ae=s(ke,I),Xe=R.updateOnItemClick,Ne=void 0!==Xe&&Xe,Fe=R.activeSlideIndex,Ve=R.onRequestChange,De=R.speed,ze=void 0===De?0:De,Be=R.delay,qe=void 0===Be?0:Be,He=R.easing,Re=void 0===He?"linear":He,Ue=R.itemsToShow,$e=void 0===Ue?0:Ue,Ge=R.itemsToScroll,Je=void 0===Ge?1:Ge,Ke=R.children,Qe=R.onAfterChange,Ye=R.autoplay,Ze=void 0!==Ye&&Ye,_e=R.autoplayDirection,et=void 0===_e?"forward":_e,tt=R.disableNavIfAllVisible,nt=void 0===tt||tt,rt=R.hideNavIfAllVisible,it=void 0===rt||rt,ot=R.centerMode,ct=void 0!==ot&&ot,dt=R.infinite,lt=void 0===dt||dt,at=R.disableNavIfEdgeVisible,ut=void 0===at||at,st=R.disableNavIfEdgeActive,ft=void 0===st||st,mt=R.dotsNav,vt=void 0===mt?{}:mt,ht=R.persistentChangeCallbacks,pt=void 0!==ht&&ht,bt=vt||{},yt=bt.show,wt=void 0!==yt&&yt,xt=bt.containerProps,gt=void 0===xt?{}:xt,St=bt.itemBtnProps,Et=void 0===St?{}:St,It=bt.activeItemBtnProps,Tt=void 0===It?{}:It,Ot=i.count(Ke)-1,Ct=$e===H.length,Lt=it&&Ct,kt=nt&&Ct,Mt=Fe-M==0||!ze&&!qe?"none":"transform ".concat(ze,"ms ").concat(Re," ").concat(qe,"ms"),Pt=o((function(e){var t=e.correctionSlideIndex,n=e.prevCorrectionSlideIndex,r=e.curActiveSlideIndex,i=lt?m(A.current.children).slice(A.current.children.length/3-n,A.current.children.length/3-n+A.current.children.length/3):m(A.current.children),o=i[r].offsetWidth,c=$e?i.reduce((function(e,t,n){return n>=r&&n<r+$e||n<r&&n<r+$e-i.length?e+t.offsetWidth:e}),0):W.current.offsetWidth,d=A.current.offsetWidth-c,l=ct&&lt?-(c-o)/2:0,a=lt?A.current.offsetWidth/3:0,u=t-r==0?0:"forward"===F.current&&r<t?a:"backward"===F.current&&r>t?-a:0,s=r-t!=0,f=function(e){var t=i.reduce((function(t,n,r){return r>=e?t:t+(n.offsetWidth||0)}),0);return lt?t:Math.min(d,t)},v=s&&lt?f(t):0,h=s||!lt?f(r):0,p=kt?0:h-v+l+u+a,b="translateX(-".concat(p,"px)"),y=lt?a+l:Math.min(A.current.offsetWidth-c,i.reduce((function(e,t,n){return n<r?e+t.offsetWidth:e}),0)),w=y+c,x=lt?[].concat(m(i.slice(r).map((function(e,t){return{slideIndex:t+r,htmlElement:e}}))),m(i.map((function(e,t){return{slideIndex:t,htmlElement:e}}))),m(i.map((function(e,t){return{slideIndex:t,htmlElement:e}}))),m(i.slice(0,r).map((function(e,t){return{slideIndex:t,htmlElement:e}})))):i.map((function(e,t){return{slideIndex:t,htmlElement:e}})),g=x.reduce((function(e,t){var n=t.slideIndex,r=t.htmlElement.offsetWidth;return(e.summ>=y&&e.summ<w||e.summ+r>y&&e.summ+r<=w)&&e.items.push({slideIndex:n,isFullyVisible:e.summ+r<=w&&e.summ>=y}),e.summ+=r,e}),{summ:0,items:[]}),S=!!g.items.find((function(e){return 0===e.slideIndex})),E=!!g.items.find((function(e){return e.slideIndex===i.length-1}));return{slidesHTMLElements:i,innerMaxWidth:c,itemsListMaxTranslateX:d,activeSlideWidth:o,offsetCorrectionForCenterMode:l,offsetCorrectionForInfiniteMode:a,itemsListTranslateX:p,itemsListTransform:b,visibleSlides:g.items,isFirstSlideVisible:S,isLastSlideVisible:E}}),[ct,kt,lt,$e]),jt=C?Pt({prevCorrectionSlideIndex:B.current,curActiveSlideIndex:Fe,correctionSlideIndex:M}):{},Wt=jt.innerMaxWidth,At=void 0===Wt?0:Wt,Xt=jt.itemsListMaxTranslateX,Nt=void 0===Xt?0:Xt,Ft=jt.activeSlideWidth,Vt=void 0===Ft?0:Ft,Dt=jt.offsetCorrectionForCenterMode,zt=void 0===Dt?0:Dt,Bt=jt.offsetCorrectionForInfiniteMode,qt=void 0===Bt?0:Bt,Ht=jt.itemsListTranslateX,Rt=void 0===Ht?0:Ht,Ut=jt.itemsListTransform,$t=void 0===Ut?"none":Ut,Gt=jt.visibleSlides,Jt=void 0===Gt?[]:Gt,Kt=o((function(e){if("forward"===e){var t=Fe+Je;return t>Ot?lt?t-Ot-1:Fe:t}if("backward"===e){var n=Fe-Je;return n<0?lt?Ot+1+n:Fe:n}return Fe}),[Fe,Je,Ot,lt]),Qt=o((function(e,t){if(F.current=t,A.current.style.transition=ze||qe?"transform ".concat(ze,"ms ").concat(Re," ").concat(qe,"ms"):"none",e!==Fe||pt){clearTimeout(V.current);var n=Pt({correctionSlideIndex:M,prevCorrectionSlideIndex:M,curActiveSlideIndex:e}),r=n.visibleSlides,i=n.isFirstSlideVisible,o=n.isLastSlideVisible;Ve(e,{visibleSlides:r,isFirstSlideVisible:i,isLastSlideVisible:o})}else X.current=0,A.current.style.transform="translateX(-".concat(zt+qt+(lt?0:Rt),"px)")}),[pt,Fe,zt,qe,Re,ze,Ve,qt,lt,Rt,M,Pt]),Yt=o((function(){Ze&&(clearTimeout(V.current),V.current=setTimeout((function(){Qt(Kt(et),et)}),qe))}),[Ze,et,Qt,Kt,qe]),Zt=o((function(e){N.current&&(e.preventDefault(),e.stopPropagation(),K&&K(e))}),[K]),_t=o((function(){Qt(Kt("backward"),"backward")}),[Qt,Kt]),en=o((function(e){N.current=!0;var t=e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX,n=X.current-t+zt+qt+(lt?0:Rt),r=A.current.offsetWidth-W.current.offsetWidth,i=Math.max(Math.min(0,-n),-r);A.current.style.transition="none",A.current.style.transform="translateX(".concat(i,"px)")}),[zt,qt,lt,Rt]),tn=o((function(e){if(A.current.removeEventListener("mouseout",tn),A.current.removeEventListener("dragstart",tn),document.removeEventListener("mousemove",en),document.removeEventListener("mouseup",tn),document.removeEventListener("touchmove",en),document.removeEventListener("touchend",tn),N.current){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[e.changedTouches.length-1].clientX:e.clientX,n=X.current-t,r=n>Vt/2?{index:Kt("forward"),direction:"forward"}:n<-Vt/2?{index:Kt("backward"),direction:"backward"}:{index:Fe,direction:"forward"};r.index===Fe&&(N.current=!1),Qt(r.index,r.direction)}}),[Fe,Vt,Qt,Kt,en]),nn=o((function(e){clearTimeout(V.current),N.current||(X.current=e.clientX,document.addEventListener("mousemove",en),document.addEventListener("mouseup",tn),A.current.addEventListener("mouseout",tn),A.current.addEventListener("dragstart",tn)),de&&de(e)}),[en,tn,de]),rn=o((function(e){clearTimeout(V.current),N.current||(X.current=e.touches[0].clientX,document.addEventListener("touchmove",en),document.addEventListener("touchend",tn)),oe&&oe(e)}),[en,tn,oe]),on=o((function(e){P(Fe),ae&&ae(e)}),[Fe,ae]),cn=o((function(){Qt(Kt("forward"),"forward")}),[Qt,Kt]),dn=function(e,t,n){return e.map((function(e,r){var i=e.props,o=(i=void 0===i?{}:i).className,c=void 0===o?"":o,d=i.onClick,a=void 0===d?null:d,u=i.style,f=void 0===u?{}:u,m=s(i,T),v=s(e,O),h=lt?z.current>=H.length?"forward":"backward":r>=Fe?"forward":"backward",p=r+t===Fe,b=Jt.find((function(e){return e.slideIndex===r+t})),y="".concat(c," ").concat(h," ").concat(p?Te:""," ").concat(b?Pe:""),w=l(l(l(l({},f),b?We:{}),p?Ce:{}),{},{boxSizing:"border-box",margin:0}),x=!n&&Ne?function(e){var t=e.direction,n=e.index,r=e.onClick;return function(e){Qt(n,t||(Fe<n?"forward":"")||(Fe>n?"backward":"")),r&&r(e)}}({direction:h,index:r+t,onClick:a}):a,g=l(l(l({role:"tabpanel",className:y,style:w,onClick:x},m),b?Ae:{}),p?Le:{});return z.current+=1,l({props:g},v)}))};return c((function(){return X.current=0,M===Fe&&(N.current=!1),F.current="",Fe!==M?ze||qe||P(Fe):(Qe&&Qe(Fe,M),(lt||"forward"===et&&Fe!==Ot||"backward"===et&&0!==Fe)&&Yt()),function(){clearTimeout(V.current)}}),[M,Fe,Qe,ze,qe,Yt,lt,Ot,et]),c((function(){return C&&Yt(),function(){clearTimeout(V.current)}}),[C]),c((function(){var e=A.current;function t(){clearTimeout(D.current),clearTimeout(V.current),D.current=setTimeout((function(){C!==window.innerWidth&&L(window.innerWidth)}),400)}return C!==window.innerWidth&&L(window.innerWidth),window.addEventListener("resize",t),function(){clearTimeout(D.current),window.removeEventListener("resize",t),document.removeEventListener("mousemove",en),document.removeEventListener("mouseup",tn),document.removeEventListener("touchmove",en),document.removeEventListener("touchend",tn),e.removeEventListener("mouseout",tn),e.removeEventListener("dragstart",tn)}}),[en,tn]),z.current=0,B.current=M,e.createElement("div",u({onClickCapture:Zt,style:l({display:"flex",flexFlow:"row wrap",boxSizing:"border-box",justifyContent:"center",width:"100%"},G)},Q,{ref:j}),he&&!Lt&&e.createElement("button",u({},pe,{type:"button",onClick:(0===Rt&&ut||0===Fe&&ft)&&!lt?void 0:_t,disabled:"boolean"==typeof pe.disabled?pe.disabled:!(!(0===Rt&&ut||0===Fe&&ft)||lt)}),me),e.createElement("div",u({},ee,{style:l(l({},_),{},{display:"flex",boxSizing:"border-box",flexFlow:"row wrap",padding:"0",overflow:"hidden",maxWidth:At?"".concat(At,"px"):void 0,flex:At?void 0:"1 0"}),ref:W}),e.createElement("div",u({},ue,{style:l(l({},re),{},{display:"flex",boxSizing:"border-box",outline:"none",transition:Mt,transform:$t}),onTouchStart:kt?void 0:rn,onMouseDown:kt?void 0:nn,onTransitionEnd:ze||qe?on:void 0,tabIndex:-1,role:"presentation",ref:A}),lt&&dn(H.slice(M),M,kt),dn(H,0,kt),lt&&dn(H,0,kt),lt&&dn(H.slice(0,M),0,kt))),ge&&!Lt&&e.createElement("button",u({},Se,{type:"button",onClick:(Rt===Nt&&ut||Fe===Ot&&ft)&&!lt?void 0:cn,disabled:"boolean"==typeof Se.disabled?Se.disabled:!(!(Rt===Nt&&ut||Fe===Ot&&ft)||lt)}),we),!!wt&&e.createElement("div",u({style:{width:"100%",display:"flex",justifyContent:"center"}},gt),Array.from({length:Math.ceil(H.length/Je)}).map((function(t,n){return e.createElement("button",u({type:"button",key:n,title:"".concat(n)},Et,Math.min(n*Je,H.length-1)===Fe?Tt:{},{onClick:function(){Qt(Math.min(n*Je,H.length-1),Math.min(n*Je,H.length-1)>Fe?"forward":"backward")}}))}))))}var L=t(C);export{L as default};
